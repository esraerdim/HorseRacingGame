import{d as g,b as u,_ as f,e as d,o as s,a as r,t as c,F as y,g as v,q as L,u as k,p as R,y as b,C as x,c as h,w as P,l as w}from"./index-D5HMm0II.js";import{A as C}from"./AppEmptyState-CIoWZg_I.js";const S=g({name:"ProgramRoundCard",props:{index:{type:[Number,String],required:!0},title:{type:String,required:!0},distance:{type:Number,required:!0},horses:{type:Array,default:()=>[]},active:{type:Boolean,default:!1}},setup(t){return{countLabel:u(()=>`${t.horses.length} horses`)}}}),q={class:"program-round-card__header"},B={class:"program-round-card__index"},I={class:"program-round-card__details"},N={class:"program-round-card__count"},A={class:"program-round-card__horse-list"};function E(t,l,i,_,m,p){return s(),d("li",{class:L(["program-round-card",{"program-round-card--active":t.active}])},[r("header",q,[r("span",B,c(t.index),1),r("div",I,[r("h3",null,c(t.title),1),r("span",null,c(t.distance)+" m",1)]),r("span",N,c(t.countLabel),1)]),r("ul",A,[(s(!0),d(y,null,v(t.horses,n=>(s(),d("li",{key:n,class:"program-round-card__horse"},c(n),1))),128))])],2)}const V=f(S,[["render",E],["__scopeId","data-v-9d37f3ee"]]),F={class:"program-panel"},T={class:"program-panel__header"},z={class:"program-panel__meta"},D=g({__name:"ProgramPanel",setup(t){const l=k(),i=R(null),_=e=>{const a=e%100;if(a>=11&&a<=13)return`${e}th Lap`;switch(e%10){case 1:return`${e}st Lap`;case 2:return`${e}nd Lap`;case 3:return`${e}rd Lap`;default:return`${e}th Lap`}},m=u(()=>{const e=new Map;return l.state.horses.pool.forEach(a=>e.set(a.id,a)),e}),p=u(()=>l.state.race.currentRoundIndex),n=u(()=>l.state.race.schedule.map(e=>({...e,horseNames:e.horseIds.map(a=>m.value.get(a)?.name??`Horse ${a}`)}))),$=e=>e===p.value+1;return b(p,async e=>{await x(),i.value?.querySelector(`[data-round="${e+1}"]`)?.scrollIntoView({behavior:"smooth",block:"nearest"})}),(e,a)=>(s(),d("section",F,[r("header",T,[a[0]||(a[0]=r("h2",null,"Race Program",-1)),r("span",z,c(n.value.length)+" rounds scheduled ",1)]),n.value.length?(s(),d("ul",{key:1,ref_key:"roundsList",ref:i,class:"program-panel__rounds"},[(s(!0),d(y,null,v(n.value,o=>(s(),h(V,{key:o.roundNumber,"data-round":o.roundNumber,index:o.roundNumber,title:_(o.roundNumber),distance:o.distance,horses:o.horseNames,active:$(o.roundNumber)},null,8,["data-round","index","title","distance","horses","active"]))),128))],512)):(s(),h(C,{key:0},{default:P(()=>[...a[1]||(a[1]=[w(" Program is empty. Generate a roster to build the race schedule. ",-1)])]),_:1}))]))}}),M=f(D,[["__scopeId","data-v-e591730d"]]);export{M as default};
