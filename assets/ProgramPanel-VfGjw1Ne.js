import{d as g,b as u,_ as f,e as d,o as s,a as r,t as c,F as v,g as y,k as L,u as k,j as R,q as b,D as x,c as h,w as P,i as w}from"./index-DND66EH7.js";import{A as S}from"./AppEmptyState-CjX8wRgw.js";const q=g({name:"ProgramRoundCard",props:{index:{type:[Number,String],required:!0},title:{type:String,required:!0},distance:{type:Number,required:!0},horses:{type:Array,default:()=>[]},active:{type:Boolean,default:!1}},setup(t){return{countLabel:u(()=>`${t.horses.length} horses`)}}}),B={class:"program-round-card__header"},C={class:"program-round-card__index"},I={class:"program-round-card__details"},N={class:"program-round-card__count"},A={class:"program-round-card__horse-list"};function E(t,l,i,_,m,p){return s(),d("li",{class:L(["program-round-card",{"program-round-card--active":t.active}])},[r("header",B,[r("span",C,c(t.index),1),r("div",I,[r("h3",null,c(t.title),1),r("span",null,c(t.distance)+" m",1)]),r("span",N,c(t.countLabel),1)]),r("ul",A,[(s(!0),d(v,null,y(t.horses,n=>(s(),d("li",{key:n,class:"program-round-card__horse"},c(n),1))),128))])],2)}const V=f(q,[["render",E],["__scopeId","data-v-9d37f3ee"]]),D={class:"program-panel"},F={class:"program-panel__header"},T={class:"program-panel__meta"},j=g({__name:"ProgramPanel",setup(t){const l=k(),i=R(null),_=e=>{const a=e%100;if(a>=11&&a<=13)return`${e}th Lap`;switch(e%10){case 1:return`${e}st Lap`;case 2:return`${e}nd Lap`;case 3:return`${e}rd Lap`;default:return`${e}th Lap`}},m=u(()=>{const e=new Map;return l.state.horses.pool.forEach(a=>e.set(a.id,a)),e}),p=u(()=>l.state.race.currentRoundIndex),n=u(()=>l.state.race.schedule.map(e=>({...e,horseNames:e.horseIds.map(a=>m.value.get(a)?.name??`Horse ${a}`)}))),$=e=>e===p.value+1;return b(p,async e=>{await x(),i.value?.querySelector(`[data-round="${e+1}"]`)?.scrollIntoView({behavior:"smooth",block:"nearest"})}),(e,a)=>(s(),d("section",D,[r("header",F,[a[0]||(a[0]=r("h2",null,"Race Program",-1)),r("span",T,c(n.value.length)+" rounds scheduled ",1)]),n.value.length?(s(),d("ul",{key:1,ref_key:"roundsList",ref:i,class:"program-panel__rounds"},[(s(!0),d(v,null,y(n.value,o=>(s(),h(V,{key:o.roundNumber,"data-round":o.roundNumber,index:o.roundNumber,title:_(o.roundNumber),distance:o.distance,horses:o.horseNames,active:$(o.roundNumber)},null,8,["data-round","index","title","distance","horses","active"]))),128))],512)):(s(),h(S,{key:0},{default:P(()=>[...a[1]||(a[1]=[w(" Program is empty. Generate a roster to build the race schedule. ",-1)])]),_:1}))]))}}),H=f(j,[["__scopeId","data-v-e591730d"]]);export{H as default};
