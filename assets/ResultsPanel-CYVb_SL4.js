import{d as f,_ as b,e as u,o,a as e,t as r,F as N,g as $,u as y,b as m,c as _,w as I,l as R,s as h}from"./index-Org9lGqP.js";/* empty css                                                                        *//* empty css                                                                  */import{A as S}from"./AppEmptyState-CpO5RhTo.js";/* empty css                                                                 *//* empty css                                                                         *//* empty css                                                                  */const T=f({name:"ResultRoundCard",props:{title:{type:String,required:!0},distance:{type:Number,required:!0},topTime:{type:String,required:!0},entries:{type:Array,default:()=>[]}}}),L={class:"result-round-card"},w={class:"result-round-card__header"},B={class:"result-round-card__duration"},C={class:"result-round-card__table"};function E(d,a,p,i,n,t){return o(),u("li",L,[e("header",w,[e("div",null,[e("h3",null,r(d.title),1),e("span",null,r(d.distance)+" m",1)]),e("span",B," Top time: "+r(d.topTime),1)]),e("table",C,[a[0]||(a[0]=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Pos"),e("th",{scope:"col"},"Name"),e("th",{scope:"col"},"Time (s)")])],-1)),e("tbody",null,[(o(!0),u(N,null,$(d.entries,s=>(o(),u("tr",{key:s.horseId},[e("td",null,r(s.position),1),e("td",null,r(s.horseName),1),e("td",null,r(s.timeLabel),1)]))),128))])])])}const q=b(T,[["render",E],["__scopeId","data-v-b29f7705"]]),x={class:"results-panel"},A={class:"results-panel__header"},F={class:"results-panel__meta"},P={key:1,class:"results-panel__rounds"},M=f({__name:"ResultsPanel",setup(d){const a=y(),p=m(()=>{const n=new Map;return a.state.horses.pool.forEach(t=>n.set(t.id,t)),n}),i=m(()=>{const n=a.state.race.schedule;return a.state.race.results.map(t=>{const g=n.find(l=>l.roundNumber===t.roundNumber)?.distance??0,c=t.entries.map(l=>{const k=l.elapsedMs/1e3;return{...l,horseName:p.value.get(l.horseId)?.name??`Horse ${l.horseId}`,timeLabel:k.toFixed(2)}}),v=c.length>0?c[0]:void 0;return{...t,distance:g,entries:c,topTime:v?.timeLabel??"â€”"}})});return(n,t)=>(o(),u("section",x,[e("header",A,[t[0]||(t[0]=e("h2",null,"Race Results",-1)),e("span",F,r(i.value.length)+" rounds completed ",1)]),i.value.length?(o(),u("ul",P,[(o(!0),u(N,null,$(i.value,s=>(o(),_(h(q),{key:s.roundNumber,title:`Round ${s.roundNumber}`,distance:s.distance,"top-time":s.topTime,entries:s.entries},null,8,["title","distance","top-time","entries"]))),128))])):(o(),_(h(S),{key:0},{default:I(()=>[...t[1]||(t[1]=[R(" No results yet. Start the race to populate this view. ",-1)])]),_:1}))]))}}),K=b(M,[["__scopeId","data-v-673656ad"]]);export{K as default};
