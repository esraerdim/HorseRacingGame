import{d as h,_ as f,e as u,o,a as e,t as r,F as b,g as N,u as k,b as m,c as _,w as y,i as I}from"./index-DEQgLic1.js";import{A as R}from"./AppEmptyState-BKoqARR-.js";const S=h({name:"ResultRoundCard",props:{title:{type:String,required:!0},distance:{type:Number,required:!0},topTime:{type:String,required:!0},entries:{type:Array,default:()=>[]}}}),T={class:"result-round-card"},L={class:"result-round-card__header"},w={class:"result-round-card__duration"},B={class:"result-round-card__table"};function C(d,n,p,i,a,t){return o(),u("li",T,[e("header",L,[e("div",null,[e("h3",null,r(d.title),1),e("span",null,r(d.distance)+" m",1)]),e("span",w," Top time: "+r(d.topTime),1)]),e("table",B,[n[0]||(n[0]=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Pos"),e("th",{scope:"col"},"Name"),e("th",{scope:"col"},"Time (s)")])],-1)),e("tbody",null,[(o(!0),u(b,null,N(d.entries,s=>(o(),u("tr",{key:s.horseId},[e("td",null,r(s.position),1),e("td",null,r(s.horseName),1),e("td",null,r(s.timeLabel),1)]))),128))])])])}const E=f(S,[["render",C],["__scopeId","data-v-51e69e01"]]),q={class:"results-panel"},x={class:"results-panel__header"},A={class:"results-panel__meta"},F={key:1,class:"results-panel__rounds"},P=h({__name:"ResultsPanel",setup(d){const n=k(),p=m(()=>{const a=new Map;return n.state.horses.pool.forEach(t=>a.set(t.id,t)),a}),i=m(()=>{const a=n.state.race.schedule;return n.state.race.results.map(t=>{const $=a.find(l=>l.roundNumber===t.roundNumber)?.distance??0,c=t.entries.map(l=>{const v=l.elapsedMs/1e3;return{...l,horseName:p.value.get(l.horseId)?.name??`Horse ${l.horseId}`,timeLabel:v.toFixed(2)}}),g=c.length>0?c[0]:void 0;return{...t,distance:$,entries:c,topTime:g?.timeLabel??"â€”"}})});return(a,t)=>(o(),u("section",q,[e("header",x,[t[0]||(t[0]=e("h2",null,"Race Results",-1)),e("span",A,r(i.value.length)+" rounds completed ",1)]),i.value.length?(o(),u("ul",F,[(o(!0),u(b,null,N(i.value,s=>(o(),_(E,{key:s.roundNumber,title:`Round ${s.roundNumber}`,distance:s.distance,"top-time":s.topTime,entries:s.entries},null,8,["title","distance","top-time","entries"]))),128))])):(o(),_(R,{key:0},{default:y(()=>[...t[1]||(t[1]=[I(" No results yet. Start the race to populate this view. ",-1)])]),_:1}))]))}}),D=f(P,[["__scopeId","data-v-5595efb5"]]);export{D as default};
